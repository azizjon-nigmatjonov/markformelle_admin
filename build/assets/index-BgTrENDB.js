import{u as R,d as b,b as m,a as c,j as s}from"./index-CTFI2LGG.js";import{F as f,C as L}from"./index-evpdQIgV.js";import{A as j}from"./AddButton-BzXG_pbh.js";import{H as A,C as v}from"./index-BbpQxzbw.js";import{r as u}from"./index-DYxRhrm6.js";import"./colorManipulator-DaxCPPGs.js";import"./PopOver-CxqJjWXh.js";import"./useModal-CEVRpokf.js";import"./index-CpUa0xWb.js";const T=[{label:"Admin",link:"/admins/admin"},{label:"Rollar"}],k=()=>{const{data:n,isLoading:e,refetch:o}=R(["GET_ROLLS_TABLE_LIST"],()=>u.getList(),{enabled:!0});return{roles:n,isLoading:e,refetch:o}},y=({handleClose:n})=>{const{mutate:e,isLoading:o}=b({mutationFn:t=>u.deleteElement(t).then(()=>{n()})});return{deleteRoll:t=>{e(t)},deleteRolLoading:o}},E=({deleteRoll:n})=>{const{navigateTo:e}=m();return{headColumns:[{title:"Rol nomi",id:"name"},{title:"Funksiyalar soni",id:"permissions_count"},{title:"Aktiv adminlar",id:"active_admins"},{title:"",id:"actions",width:90,actions:["edit","delete"]}],handleActions:(t,r)=>{r==="edit"&&e(`/admins/rolls/${t.id}`),r==="delete"&&t.name!=="super"&&n(t.id)}}},w=()=>{const{navigateTo:n}=m(),{roles:e,isLoading:o,refetch:l}=k(),{deleteRoll:t}=y({handleClose:l}),{headColumns:r,handleActions:h}=E({deleteRoll:t}),[a,p]=c.useState({}),{collectFilter:x,storeFilters:F}=f({store:!0,filterParams:a}),d=i=>{p(i),F(i)},g=i=>{x({type:"q",val:i}),d({...a,q:i,page:1})},C=c.useMemo(()=>(e==null?void 0:e.data)??[],[e]);return s.jsxs(s.Fragment,{children:[s.jsx(A,{extra:s.jsx(v,{items:T,progmatic:!0,type:"link",handleSearch:g,defaultValue:a==null?void 0:a.q}),children:s.jsx("div",{className:"ml-5",children:s.jsx(j,{text:"Yangi rol qo'shish",onClick:()=>n("/admins/rolls/:create")})})}),s.jsx("div",{className:"px-5",children:s.jsx(L,{headColumns:r,bodyColumns:C,isResizeble:!0,handleActions:h,isLoading:o,filterParams:a,handleFilterParams:d})})]})};export{w as default};
