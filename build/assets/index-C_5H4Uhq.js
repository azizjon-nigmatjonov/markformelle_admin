import{u as C,c as b,a as m,r as c,j as s,H as f,h as L,A as j}from"./index-DRACHr32.js";import{C as A}from"./index-Cp2NbtL3.js";import{r as u}from"./index-DDFLSLbX.js";import{F as v}from"./index-4kaVakTx.js";import"./index-mGIeUDps.js";import"./PopOver-X96IiLWI.js";const T=[{label:"Admin",link:"/admins/admin"},{label:"Rollar"}],k=()=>{const{data:n,isLoading:e,refetch:a}=C(["GET_ROLLS_TABLE_LIST"],()=>u.getList(),{enabled:!0});return{roles:n,isLoading:e,refetch:a}},y=({handleClose:n})=>{const{mutate:e,isLoading:a}=b({mutationFn:t=>u.deleteElement(t).then(()=>{n()})});return{deleteRoll:t=>{e(t)},deleteRolLoading:a}},E=({deleteRoll:n})=>{const{navigateTo:e}=m();return{headColumns:[{title:"Rol nomi",id:"name"},{title:"Funksiyalar soni",id:"permissions_count"},{title:"Aktiv adminlar",id:"active_admins"},{title:"",id:"actions",width:90,actions:["edit","delete"]}],handleActions:(t,l)=>{l==="edit"&&e(`/admins/rolls/${t.id}`),l==="delete"&&t.name!=="super"&&n(t.id)}}},M=()=>{const{navigateTo:n}=m(),{roles:e,isLoading:a,refetch:r}=k(),{deleteRoll:t}=y({handleClose:r}),{headColumns:l,handleActions:h}=E({deleteRoll:t}),[o,p]=c.useState({}),{collectFilter:x,storeFilters:F}=v({store:!0,filterParams:o}),d=i=>{p(i),F(i)},g=i=>{x({type:"q",val:i}),d({...o,q:i,page:1})},R=c.useMemo(()=>(e==null?void 0:e.data)??[],[e]);return s.jsxs(s.Fragment,{children:[s.jsx(f,{extra:s.jsx(L,{items:T,progmatic:!0,type:"link",handleSearch:g,defaultValue:o==null?void 0:o.q}),children:s.jsx("div",{className:"ml-5",children:s.jsx(j,{text:"Yangi rol qo'shish",onClick:()=>n("/admins/rolls/:create")})})}),s.jsx("div",{className:"container",children:s.jsx(A,{headColumns:l,bodyColumns:R,isResizeble:!0,handleActions:h,isLoading:a,filterParams:o,handleFilterParams:d})})]})};export{M as default};
